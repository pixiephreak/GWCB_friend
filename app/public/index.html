<!DOCTYPE html>
<html>

<head>
	<meta charset="UTF-8" content="text">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Friend Finder</title>
	<script src="http://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
</head>

<body>
	<h1>Find a Friend</h1>
	<h1> "...judging people on their politics is entirely appropriate. Politics is a vehicle through which they wish to shape the world."  -- Joel D. Anderson</h1>

	<h2>About You</h2>
	<form>
		Name(Required): <input type="text" name="name" value="" placeholder="name"> Photo(Optional): <input type="text" name="name" value="" placeholder="link to a photo">
		<div id='survey'></div>
	 <button type="submit" class="btn btn-primary submit">Submit</button>
	</form>
	<!-- <h2>Would you like to:</h2>
			<form action='' method=''>
				<input type="radio" name="gender" value="male" checked>find a friend who shares your politics<br>
				<input type="radio" name="gender" value="female">find someone who shares some of your political attitudes, but differs on others<br>
				<input type="radio" name="gender" value="other">find someone whose views differ significantly<br>
				<button type="submit">Submit</button>
			</form> -->

</body>

<script type="text/javascript">

var friends = [];

var Friend = function(name, photo){
	this.name = name;
	this.photo = photo;
	this.scores = [];
	if (!(this instanceof Friend)) {
		return new Friend(front, back);
	}
};

Friend.prototype.totalScore = function(){};

var questions = [{
	"question": "Are you registered with a political party or would you be if you had the right to vote in the U.S.?",
	"answers": [
		{
			"answer": "Yes, I am a Republican.",
			"score": 1
		},
		{
			"answer": "Yes, I'm a Democrat",
			"score": 2
		},
		{
			"answer": "Yes, I'm a third party voter",
			"score": 0
		},
		{
			"answer": "Democracy is broken, so I find other ways to take political action.",
			"score": 3
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "Do you:",
	"answers": [
		{
			"answer": "support the policies and ideology of the Trump regime?",
			"score": 1
		},
		{
			"answer": "think it's a shame that Trump was able to manipulate people's interest in order to gain power?",
			"score": 2
		},
		{
			"answer": "detest Donald Trump on political, ideological, and personal terms?",
			"score": 3
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "You think that any nation's borders:",
	"answers": [
		{
			"answer": "should be closed to all immigrants and refugees.",
			"score": 1
		},
		{
			"answer": "should be open, but clearly defined procedures for immigrating should be established and followed.",
			"score": 2
		},
		{
			"answer": "are imaginary constructs that should not factor into where how people move through their world.",
			"score": 3
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": " Women:",
	"answers": [
		{
			"answer": "have the right to make any and all decisions regarding their personal health and should have explicitly protected access to resources needed to do so.",
			"score": 3
		},
		{
			"answer": "should have access to the same and only the same healthcare resources as men (other services should be available, but billed additionally on an individual basis).",
			"score": 2
		},
		{
			"answer": "Should not be allowed to make decisions about their bodies that could prevent or terminate pregnancy.",
			"score": 1
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": " Racism:",
	"answers": [
		{
			"answer": "Exists.",
			"score": 3
		},
		{
			"answer": "Existed before, but was fixed.",
			"score": 2
		},
		{
			"answer": "Doesn't Exist.",
			"score": 1
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "Scientific research:",
	"answers": [
		{
			"answer": "proves that the climate is warming as a direct result of human activities.",
			"score": 3
		},
		{
			"answer": "suggests the climate is warming, but can't determine exactly why.",
			"score": 2
		},
		{
			"answer": "does not in any way prove or disprove global climate change.",
			"score": 1
		},{
				"answer": "shows a natural and expected pattern of warming and cooling.",
				"score": 1
			},
			{
					"answer": "shows a natural and expected pattern of warming and cooling.",
					"score": 1
				},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "The right to determine and express one's own gender identity:",
	"answers": [
		{
			"answer": "is fundamental and should be respected, protected and embraced by others.",
			"score": 3
		},
		{
			"answer": "is up to the individual, but protecting it shouldn't be a priority for lawmakers.",
			"score": 2
		},
		{
			"answer": "is unnatural and wrong",
			"score": 1
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "If an individual lives in poverty, it's because:",
	"answers": [
		{
			"answer": "s/he's lazy.",
			"score": 1
		},
		{
			"answer": "of a complex web of circumstances, some of which are in her control and some of which aren't.",
			"score": 2
		},
		{
			"answer": "the American Dream of social mobility is a fallacy.",
			"score": 3
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": " Labor Unions:",
	"answers": [
		{
			"answer": "protect worker's rights to safe conditions and access to fair pay.",
			"score": 3
		},
		{
			"answer": "severely limit companies' ability to be efficient and productive.",
			"score": 1
		},
		{
			"answer": "serve a purpose, but are often corrupt.",
			"score": 2
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
},{
	"question": "Guns:",
	"answers": [
		{
			"answer": "do not belong in the hands of civilians or governmental bodies.",
			"score": 3
		},
		{
			"answer": "should not be controlled or regulated by the government.",
			"score": 1
		},
		{
			"answer": "should be available to individuals, but only after extensive background checks.",
			"score": 2
		},
		{
			"answer": "None of these answers reflect my point of view",
			"score": 0
		}
	]
}];

// <form action="" method="post">
//   <fieldset>
//     <legend>Title</legend>
//     <input type="radio" name="radio" id="radio">
//     <label for="radio">Click me</label>
//   </fieldset>
// </form>
//
// create form
// add attr
// append to survey
// create fieldset
// append to form
// 	create legend
// 	create input
// 	add attr type name id
// 	create label
// 	add attr for
// 	append all to fieldset
	var survey = document.getElementById('survey');
	questions.forEach(function(question){
		var questionText = question.question;
		var questionAnswers = question.answers;
		var fieldset = document.createElement('fieldset');
		question = document.createElement('p');
		question.innerHTML = questionText;
		fieldset.appendChild(question);
		questionAnswers.forEach(function(question){
			var input = document.createElement('input');
			var label = document.createElement('label');
			label.innerHTML = question.answer;
			input.setAttribute("type", 'radio');
			input.setAttribute("name", 'question');
			input.setAttribute("id", 'question');
			fieldset.appendChild(input);
			fieldset.appendChild(label);
		})
		survey.appendChild(fieldset);
	});





$(".submit").on("click", function(event) {
      event.preventDefault();

      // Here we grab the form elements
      var newReservation = {
        customerName: $("#reserve-name").val().trim(),
        phoneNumber: $("#reserve-phone").val().trim(),
        customerEmail: $("#reserve-email").val().trim(),
        customerID: $("#reserve-unique-id").val().trim()
      };

      console.log(newReservation);

      // This line is the magic. It"s very similar to the standard ajax function we used.
      // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
      // The callback is the response of the server. In our case, we set up code in api-routes that "returns" true or false
      // depending on if a tables is available or not.

      $.post("/api/friends", newReservation,
        function(data) {

          // If a table is available... tell user they are booked.
          if (data) {
            alert("Yay! You are officially booked!");
          }

          // If a table is available... tell user they on the waiting list.
          else {
            alert("Sorry you are on the wait list");
          }

          // Clear the form when submitting
          $("#reserve-name").val("");
          $("#reserve-phone").val("");
          $("#reserve-email").val("");
          $("#reserve-unique-id").val("");

        });

    });

    //function to get and show
    function runTableQuery() {

        // Here we get the location of the root page.
        // We use this instead of explicitly saying the URL is localhost:3001 because the url will change when we deploy.
        var currentURL = window.location.origin;

        // The AJAX function uses the URL of our API to GET the data associated with it (initially set to localhost)
        $.ajax({ url: currentURL + "/api/tables", method: "GET" })
        .done(function(tableData) {

          // Here we are logging the URL so we have access to it for troubleshooting
          console.log("------------------------------------");
          console.log("URL: " + currentURL + "/api/tables");
          console.log("------------------------------------");

          // Here we then log the NYTData to console, where it will show up as an object.
          console.log(tableData);
          console.log("------------------------------------");

          // Loop through and display each of the customers
          for (var i = 0; i < tableData.length; i++) {

            // Create the HTML Well (Section) and Add the table content for each reserved table
            var tableSection = $("<div>");
            tableSection.addClass("well");
            tableSection.attr("id", "tableWell-" + i + 1);
            $("#tableSection").append(tableSection);

            var tableNumber = i + 1;


            // Then display the remaining fields in the HTML (Section Name, Date, URL)
            $("#tableWell-" + i + 1).append("<h2><span class='label label-primary'>" + tableNumber + "</span> | " + tableData[i].customerID + "</h2>");
          }
        });
      }


</script>

</html>
